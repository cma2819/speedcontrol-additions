import{r as x,j as e}from"./dialog-import-commentator-Zl_WlTxq.js";import{B as h,G as n,r as w}from"./Grid-7N0pHnBJ.js";import{R as C,L as g,a as m,d as y,b as T,C as A,c as o,A as p,I as d,e as E}from"./ExpandMore-SQAnb6n7.js";import{L as I,S as f,u as N,B as k,C as b,P as B,T as j,D as L}from"./nodecg-jiKkhIrU.js";const S=({open:a,closeFunction:s,addition:i})=>{const r=N(),c={social:{nico:"",youtube:"",twitter:""}},[t,u]=x.useState(c);x.useEffect(()=>{u({social:{nico:i.social.nico??"",youtube:i.social.youtube??"",twitter:i.social.twitter??""}})},[a]);const v=async()=>{await r.sendMessage("updateUserAddition",{id:i.id,social:t.social})};return e.jsx(k,{open:a,sx:{zIndex:l=>l.zIndex.drawer+1},children:e.jsx(b,{children:e.jsx(B,{sx:{p:2},children:e.jsxs(n,{container:!0,spacing:2,children:[e.jsx(n,{item:!0,xs:12,children:e.jsx(j,{label:"ニコニココミュニティID",fullWidth:!0,value:t.social.nico,onChange:l=>{u({...t,social:{...t.social,nico:l.currentTarget.value}})}})}),e.jsx(n,{item:!0,xs:12,children:e.jsx(j,{label:"YouTube",fullWidth:!0,value:t.social.youtube,onChange:l=>{u({...t,social:{...t.social,youtube:l.currentTarget.value}})}})}),e.jsx(n,{item:!0,xs:12,children:e.jsx(j,{label:"Twitter",fullWidth:!0,value:t.social.twitter,onChange:l=>{u({...t,social:{...t.social,twitter:l.currentTarget.value}})}})}),e.jsx(n,{item:!0,xs:12,children:e.jsxs(f,{spacing:2,direction:"row",justifyContent:"end",children:[e.jsx(h,{variant:"contained",color:"primary",onClick:()=>{v().then(()=>{s()}).catch(()=>{console.error("Failed to update user addition.")})},children:"更新"}),e.jsx(h,{variant:"contained",color:"warning",onClick:()=>{s()},children:"キャンセル"})]})})]})})})})},U=({user:a,addition:s})=>{const[i,r]=x.useState(!1),[c,t]=x.useState(!1);return e.jsxs(e.Fragment,{children:[e.jsxs(g,{onClick:()=>{r(!i)},children:[e.jsx(m,{primary:a.name}),i?e.jsx(y,{}):e.jsx(T,{})]}),e.jsxs(A,{in:i,timeout:"auto",unmountOnExit:!0,children:[e.jsx(m,{children:e.jsxs(f,{spacing:1,children:[e.jsx("div",{children:e.jsx(o,{avatar:e.jsx(p,{children:"ID"}),label:a.id})}),e.jsx("div",{children:e.jsx(o,{color:"twitch",icon:e.jsx(d,{baseClassName:"fa-brands",className:"fa-twitch"}),label:a.social.twitch??"-"})}),e.jsx("div",{children:e.jsx(o,{color:"nico",avatar:e.jsx(p,{children:"N"}),label:(s==null?void 0:s.social.nico)??"-"})}),e.jsx("div",{children:e.jsx(o,{color:"youtube",icon:e.jsx(d,{baseClassName:"fa-brands",className:"fa-youtube"}),label:(s==null?void 0:s.social.youtube)??"-"})}),e.jsx("div",{children:e.jsx(o,{color:"twitter",icon:e.jsx(d,{baseClassName:"fa-brands",className:"fa-twitter"}),label:(s==null?void 0:s.social.twitter)??"-"})})]})}),e.jsxs(h,{fullWidth:!0,variant:"outlined",sx:{textTransform:"none"},onClick:()=>{t(!0)},children:[a.name," を編集"]}),e.jsx(S,{open:c,closeFunction:()=>{t(!1)},addition:{id:a.id,social:(s==null?void 0:s.social)??{}}})]})]})},D=()=>{const{userAdditions:a,speedcontrolRunners:s}=x.useContext(C),i=r=>a==null?void 0:a.find(c=>c.id===r);return e.jsx(I,{sx:{width:"100%"},children:s==null?void 0:s.map(r=>{const c=i(r.id);return e.jsx(U,{user:r,addition:c},r.id)})})},P=()=>e.jsx(L,{children:e.jsx(E,{children:e.jsx(b,{sx:{height:"640px",overflow:"auto"},children:e.jsx(D,{})})})});w(e.jsx(P,{}));
